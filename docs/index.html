<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>PC 電源管理</title>
  <style>/* 省略 */</style>
</head>
<body>
  <h1>PC 電源状態</h1>
  <button id="refresh-btn">🔄 更新</button>
  <table>…</table>
  <script>
    const owner = 'yuuto1226';
    const repo  = 'tests_pages';

    document.getElementById('refresh-btn').onclick = () => {
      const url = `https://github.com/${owner}/${repo}/issues/new`
        + '?labels=update_status'
        + '&title=manual_status_update';
      window.open(url, '_blank');
    };

async function load(){
  const res=await fetch("status.json"); const data=await res.json();
  const tb=document.getElementById("list"); tb.innerHTML="";
  data.forEach(h=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${h.name}</td>
      <td>${h.ip}</td>
      <td>${h.alive?"🟢ON":"🔴OFF"}</td>
      <td>
        <a href="https://github.com/${owner}/${repo}/issues/new?
          labels=control&
          title=${h.alive?"shutdown_"+h.name:"wake_"+h.name}&
          body=action:%20${h.alive?"shutdown":"wake"}%0Aname:%20${h.name}"
          >${h.alive?"シャットダウン":"Wake"}</a>
      </td>`;
    tb.appendChild(tr);
  });
}
load(); setInterval(load,30000);
  </script>
</body>
</html>
